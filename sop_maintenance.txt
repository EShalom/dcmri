SOPs for maintainers
********************

Adding dependencies
-------------------

- update requirements.txt
- update pyproject.toml
- generate a new poetry.lock file. On the terminal, run

poetry lock

Check test coverage
-------------------

cd to /dcmri top folder

pytest --cov=dcmri --cov-report term-missing


Documentation build
-------------------

To generate a changelog in the documentation, you need to give sphinx access to the release page on GitHub:

-- generate a Github API token: In the upper-right corner of any page, click your profile photo, then click Settings. In the left sidebar, click Developer settings. In the left sidebar, click Personal access tokens. Click Generate new token. Note: tokens expire so you may need to repeat this.
-- Save the token in the environment variable SPHINX_GITHUB_CHANGELOG_TOKEN. On windows: $Env:SPHINX_GITHUB_CHANGELOG_TOKEN = "token value"



Creating a new release
----------------------

- Update the version number everywhere in the code.



- Merge the dev branch with the main branch.

- Create a release on github

- Create a release on Zenodo (v1.0 and onwards) 

- Create a release on PyPI:

In the terminal, cd to the /dcmri directory, and:

python -m build
twine upload dist/*

When prompted for user name, enter __token__

As password paste the API token generated in PyPi (repository settings). Note: Paste with Ctrl-V does not work in Windows. Use Edit > Paste via the menu.
